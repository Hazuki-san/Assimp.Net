<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFrameworks>netstandard1.3;net35;net4;</TargetFrameworks>
    <LangVersion>latest</LangVersion>
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <SignAssembly Condition=" '$(MSBuildRuntimeType)' != 'Core'">true</SignAssembly>
    <AssemblyOriginatorKeyFile Condition=" '$(MSBuildRuntimeType)' != 'Core'">AssimpKey.snk</AssemblyOriginatorKeyFile>
    <GeneratePackageOnBuild>true</GeneratePackageOnBuild>
    <Authors>Nicholas Woodfield</Authors>
    <Company />
    <Version>4.1.0</Version>
    <PackageLicenseUrl>http://opensource.org/licenses/mit-license.php</PackageLicenseUrl>
    <Copyright>Copyright © 2012-2018 Nicholas Woodfield</Copyright>
    <PackageIconUrl>https://bytebucket.org/Starnick/assimpnet/raw/18e2bc4dbf261221bac39741247287c4f5f373bb/logo.png</PackageIconUrl>
    <PackageProjectUrl>https://bitbucket.org/Starnick/assimpnet</PackageProjectUrl>
    <RepositoryUrl>https://bitbucket.org/Starnick/assimpnet.git</RepositoryUrl>
    <RepositoryType>Git</RepositoryType>
    <Description>A .NET Wrapper for the Open Asset Import (Assimp) library. The library is able to import dozens of different 3D model formats (e.g. OBJ, FBX, Collada) and export to several formats (e.g. OBJ, Collada). This release targets version 3.1.1 of the native library.</Description>
    <PackageTags>Model 3D Assimp Mesh Importers Content Assets FBX Collada</PackageTags>
    <RootNamespace>Assimp</RootNamespace>
    <AssemblyName>AssimpNet</AssemblyName>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)'=='Release'">
    <DocumentationFile>bin\Release\$(TargetFramework)\AssimpNet.xml</DocumentationFile>
  </PropertyGroup>

  <ItemGroup>
    <Content Include="..\ChangeLog.txt" Link="build\ChangeLog.txt" PackagePath="" />
    <Content Include="..\License.txt" Link="build\License.txt" PackagePath="" />
    <Content Include="..\Docs\AssimpNet Documentation %28October 2018%29.chm" Link="build\AssimpNet Documentation %28October 2018%29.chm" PackagePath="" />
    <Content Include="..\libs\Assimp\win-x64\Assimp64.dll" Link="build\native\win-x64\Assimp64.dll" PackagePath="build\native\win-x64\" />
    <Content Include="..\libs\Assimp\win-x86\Assimp32.dll" Link="build\native\win-x86\Assimp32.dll" PackagePath="build\native\win-x86\" />
    <Content Include="..\libs\Assimp\linux-x64\libAssimp64.so" Link="build\native\linux-x64\libAssimp64.so" PackagePath="build\native\linux-x64\" />
    <Content Include="AssimpNet.targets" PackagePath="build\" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="MemoryInterop.ILPatcher" Version="2.0.0">
      <PrivateAssets>all</PrivateAssets>
    </PackageReference>
  </ItemGroup>

  <!-- Copy targets and native files to a build folder so unit tests can access it (overall will setup a mock nuget folder structure)  -->
  <Target Name="CopyBuildFiles" AfterTargets="AfterBuild">
    <Copy SourceFiles="%(Content.Identity)" DestinationFiles="bin\$(Configuration)\%(Content.Link)" SkipUnchangedFiles="true" Condition="'%(Content.Link)' != ''" />
    <Copy SourceFiles="AssimpNet.targets" DestinationFolder="bin\$(Configuration)\build" SkipUnchangedFiles="true" />
  </Target>

</Project>
